<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>NHA KHOA-STH</title>
    <link href="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/style.min.css" rel="stylesheet" />
    <link href="~/Content/Store/css/styles.css" rel="stylesheet" />
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
</head>
<body class="sb-nav-fixed">
    <nav class="sb-topnav navbar navbar-expand navbar-dark bg-dark">
        <!-- Navbar Brand-->
        <a class="navbar-brand ps-3" href="index.html">STH</a>
        <!-- Sidebar Toggle-->
        <button class="btn btn-link btn-sm order-1 order-lg-0 me-4 me-lg-0" id="sidebarToggle" href="#!"><i class="fas fa-bars"></i></button>
        <!-- Navbar Search-->
        <form class="d-none d-md-inline-block form-inline ms-auto me-0 me-md-3 my-2 my-md-0">
            <div class="input-group">
                <input class="form-control" type="text" placeholder="Tìm Kiếm..." aria-label="Tìm Kiếm..." aria-describedby="btnNavbarSearch" />
                <button class="btn btn-primary" id="btnNavbarSearch" type="button"><i class="fas fa-search"></i></button>
            </div>
        </form>
        <!-- Navbar-->
        <ul class="navbar-nav ms-auto ms-md-0 me-3 me-lg-4">
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" id="navbarDropdown" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-user fa-fw"></i></a>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                    <li><a class="dropdown-item" href="#!">Thông Tin Tài Khoản</a></li>
                </ul>
            </li>
        </ul>
    </nav>
    <div id="layoutSidenav">
        <div id="layoutSidenav_nav">
            <nav class="sb-sidenav accordion sb-sidenav-dark" id="sidenavAccordion">
                <div class="sb-sidenav-menu">
                    <div class="nav">
                        <div class="sb-sidenav-menu-heading">
                            <a class="nav-link" href="index.html">
                                <div class="sb-nav-link-icon"><i class="fas fa-tachometer-alt"></i></div>
                                Trang Chủ
                            </a>
                            <a class="nav-link collapsed" href="#" data-bs-toggle="collapse" data-bs-target="#collapseLayouts" aria-expanded="false" aria-controls="collapseLayouts">
                                <div class="sb-nav-link-icon"><i class="fas fa-columns"></i></div>
                                Quan Ly
                                <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                            </a>
                            <div class="collapse" id="collapseLayouts" aria-labelledby="headingOne" data-bs-parent="#sidenavAccordion">
                                <nav class="sb-sidenav-menu-nested nav">
                                    <a class="nav-link" href="@Url.Action("Index", "Productss")">San Pham</a>
                                    <a class="nav-link" href="@Url.Action("Sale", "Productss")">Giảm Giá Sản Phẩm </a>
                                    <a class="nav-link" href="@Url.Action("Hot", "Productss")">San Pham Best</a>
                                    <a class="nav-link" href="@Url.Action("Index", "Discounts")">Voucher</a>
                                    <a class="nav-link" href="@Url.Action("Index", "Order_details")">Hóa đơn</a>
                                    <a class="nav-link" href="@Url.Action("Orderday", "Order_details")">Lọc Hoá Đơn</a>
                                    <a class="nav-link" href="@Url.Action("TopAccounts", "Order_details")">luot mua</a>
                                </nav>
                            </div>
                            <a class="nav-link" href="tables.html">
                                <div class="sb-nav-link-icon"><i class="fas fa-table"></i></div>
                                Quan Ly Doanh Thu
                            </a>
                            @*<a class="nav-link" href="charts.html">
                                    <div class="sb-nav-link-icon"><i class="fa-solid fa-right-from-bracket"></i></div>
                                    Đăng Xuất
                                </a>*@
                            <!-- Link đăng xuất -->
                            <a href="#" id="logout-link">Đăng xuất</a>

                            <!-- Form đăng xuất (ẩn ban đầu) -->
                            <div id="logout-form" style="display: none;">
                                <h5>Ready to leave?</h5>
                                <p>Select "Logout" below if you are ready to end your current session.</p>
                                <form action="/Account/LogOff" method="post">
                                    @Html.AntiForgeryToken()
                                    <button type="submit" class="btn btn-primary">Logout</button>
                                    <button type="button" class="btn btn-secondary" id="cancel-logout">Cancel</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="sb-sidenav-footer">
                    <div class="small">Đăng Nhập Vào:</div>
                    STH
                </div>
            </nav>

        </div>
        <div id="layoutSidenav_content">
            @RenderBody()
            <footer class="py-4 bg-light mt-auto">
                <div class="container-fluid px-4">
                    <div class="d-flex align-items-center justify-content-between small">
                        <div class="text-muted">Copyright &copy; STH.2023</div>
                        <div>
                            <a href="#">Chính sách bảo mật</a>
                            &middot;
                            <a href="#">Điều khoản &amp; Điều kiện</a>
                        </div>
                    </div>
                </div>
            </footer>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <script src="~/Content/Store/js/scripts.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js" crossorigin="anonymous"></script>
    <script src="~/Content/Store/assets/demo/chart-area-demo.js"></script>
    <script src="~/Content/Store/assets/demo/chart-bar-demo.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/umd/simple-datatables.min.js" crossorigin="anonymous"></script>
    <script src="~/Content/Store/js/datatables-simple-demo.js"></script>


    <script src="~/Content/Layout/assets/js/jquery-3.5.1.min.js"></script>
    <!-- bootstrap -->
    <script src="~/Content/Layout/assets/js/bootstrap.min.js"></script>
    <script src="~/Content/Layout/assets/js/popper.min.js"></script>

    <!-- fontawesome  -->
    <script src="~/Content/Layout/assets/js/font-awesome.min.js"></script>

    <!-- swiper slider  -->
    <script src="~/Content/Layout/assets/js/swiper-bundle.min.js"></script>

    <!-- mixitup -- filter  -->
    <script src="~/Content/Layout/assets/js/jquery.mixitup.min.js"></script>

    <!-- fancy box  -->
    <script src="~/Content/Layout/assets/js/jquery.fancybox.min.js"></script>

    <!-- parallax  -->
    <script src="~/Content/Layout/assets/js/parallax.min.js"></script>

    <!-- gsap  -->
    <script src="~/Content/Layout/assets/js/gsap.min.js"></script>

    <!-- scroll trigger  -->
    <script src="assets/js/ScrollTrigger.min.js"></script>
    <!-- scroll to plugin  -->
    <script src="~/Content/Layout/assets/js/ScrollToPlugin.min.js"></script>
    <!-- rellax  -->
    <!-- <script src="assets/js/rellax.min.js"></script> -->
    <!-- <script src="assets/js/rellax-custom.js"></script> -->
    <!-- smooth scroll  -->
    <script src="~/Content/Layout/assets/js/smooth-scroll.js"></script>
    @RenderSection("scripts", required: false)

</body>
</html>

<button class="nut-mo-chatbox" onclick="moForm()">Chat</button>
<div class="Chatbox" id="myForm">
    <form action="" class="form-container">
        <h1>HỖ TRỢ</h1>
        <label for="msg"><b>Lời Nhắn</b></label>
        <textarea placeholder="Bạn hãy nhập lời nhắn.." name="msg" id="message" required></textarea>
        <ul id="discussion">
        </ul>
        <div style="display:flex">
            <input type="button" class="btn " id="sendmessage" value="Gửi" />
            <input type="hidden" id="displayname" value="@Session["Email"]" />
            <button type="button" class="btn nut-dong-chatbox " onclick="dongForm()">Đóng</button>
        </div>
    </form>
</div>

<script src="~/Scripts/jquery.signalR-2.4.3.min.js"></script>
<!-- SignalR hub script. -->
<script src="~/signalr/hubs"></script>
<script src="~/js/main.js"></script>
<script>
    $(document).ready(function () {
        // Hiển thị form logout khi click vào đường link "Đăng xuất"
        $("#logout-link").click(function (event) {
            event.preventDefault();
            $("#logout-form").show();
        });

        // Ẩn form logout khi click vào nút "Cancel"
        $("#cancel-logout").click(function () {
            $("#logout-form").hide();
        });
    });

    /*Hàm Mở Form*/
    function moForm() {
        document.getElementById("myForm").style.display = "block";
    }
    /*Hàm Đóng Form*/
    function dongForm() {
        document.getElementById("myForm").style.display = "none";
    }
    $(function () {
        var chat = $.connection.chatHub;
        // Tạo một chức năng mà trung tâm có thể gọi lại để hiển thị thông báo.
        chat.client.addNewMessageToPage = function (name, message) {
            // Thêm tin nhắn vào trang.
            $('#discussion').append('<li><strong>' + htmlEncode(name)
                + '</strong>: ' + htmlEncode(message) + '</li>');
        };
        // Lấy tên người dùng và lưu trữ nó để thêm vào tin nhắn.
        // Đặt tiêu điểm ban đầu cho hộp nhập tin nhắn.
        $('#message').focus();
        // Bắt đầu kết nối.
        $.connection.hub.start().done(function () {
            $('#sendmessage').click(function () {
                // Gọi phương thức Gửi trên trung tâm.
                chat.server.send($('#displayname').val(), $('#message').val());
                // Xóa hộp văn bản và đặt lại tiêu điểm cho nhận xét tiếp theo.
                $('#message').val('').focus();
            });
        });
    });
    // Chức năng tùy chọn này mã hóa html thông báo để hiển thị trong trang.
    function htmlEncode(value) {
        var encodedValue = $('<div />').text(value).html();
        return encodedValue;
    }
</script>
<style>

    /* Nút Để Mở Chatbox */
    .nut-mo-chatbox {
        z-index: 1;
        background-color: #FF6B6B;
        color: white;
        padding: 16px 20px;
        border: none;
        cursor: pointer;
        opacity: 0.8;
        position: fixed;
        bottom: 23px;
        right: 28px;
        width: 100px;
        border-radius: 20px;
        font-size: 18px;
    }

    /* Ẩn chatbox mặc định */
    .Chatbox {
        display: none;
        position: fixed;
        bottom: 0;
        right: 15px;
        border: 3px solid #f1f1f1;
        z-index: 9;
        width: 300px;
        max-height: 400px;
        overflow-y: scroll;
        border-radius: 10px;
        background-color: #FFFFFF;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    /* Thêm style cho form */
    .form-container {
        max-width: 100%;
        padding: 10px;
        background-color: #F8F8F8;
    }

        /* thiết lập style textarea */
        .form-container textarea {
            width: 100%;
            padding: 10px;
            margin: 10px 0 20px 0;
            border: none;
            background: #f1f1f1;
            resize: none;
            min-height: 100px;
            border-radius: 10px;
            font-size: 16px;
            font-family: 'Roboto', sans-serif;
        }

            /*thiết lập style cho textarea khi được focus */
            .form-container textarea:focus {
                background-color: #ddd;
                outline: none;
            }

        /* Sthiết lập style cho nút trong form*/
        .form-container .btn {
            background-color: #4CAF50;
            color: white;
            padding: 12px 16px;
            border: none;
            cursor: pointer;
            width: 100%;
            margin-bottom: 10px;
            opacity: 0.8;
            border-radius: 20px;
            font-size: 18px;
            font-family: 'Roboto', sans-serif;
        }

        /* Thiết lập màu nền cho nút đóng chatbox */
        .form-container .nut-dong-chatbox {
            background-color: red;
        }

        /* Thêm hiệu ứng hover cho nút*/
        .form-container .btn:hover, .nut-mo-chatbox:hover {
            opacity: 1;
        }
</style>



<button class="nut-mo-chatbox" onclick="moForm()">Chat</button>
<div class="Chatbox" id="myForm">
    <form action="" class="form-container">
        <h1>HỖ TRỢ</h1>
        <label for="msg"><b>Lời Nhắn</b></label>
        <textarea placeholder="Bạn hãy nhập lời nhắn.." name="msg" id="message" required></textarea>
        <ul id="discussion">
        </ul>
        <div style="display:flex">
            <input type="button" class="btn " id="sendmessage" value="Gửi" />
            <input type="hidden" id="displayname" value="@Session["Email"]" />
            <button type="button" class="btn nut-dong-chatbox " onclick="dongForm()">Đóng</button>
        </div>
    </form>
</div>

<script src="~/Scripts/jquery.signalR-2.4.3.min.js"></script>
<!-- SignalR hub script. -->
<script src="~/signalr/hubs"></script>
<script src="~/js/main.js"></script>
<script>
    $(document).ready(function () {
        // Hiển thị form logout khi click vào đường link "Đăng xuất"
        $("#logout-link").click(function (event) {
            event.preventDefault();
            $("#logout-form").show();
        });

        // Ẩn form logout khi click vào nút "Cancel"
        $("#cancel-logout").click(function () {
            $("#logout-form").hide();
        });
    });

    /*Hàm Mở Form*/
    function moForm() {
        document.getElementById("myForm").style.display = "block";
    }
    /*Hàm Đóng Form*/
    function dongForm() {
        document.getElementById("myForm").style.display = "none";
    }
    $(function () {
        var chat = $.connection.chatHub;
        // Tạo một chức năng mà trung tâm có thể gọi lại để hiển thị thông báo.
        chat.client.addNewMessageToPage = function (name, message) {
            // Thêm tin nhắn vào trang.
            $('#discussion').append('<li><strong>' + htmlEncode(name)
                + '</strong>: ' + htmlEncode(message) + '</li>');
        };
        // Lấy tên người dùng và lưu trữ nó để thêm vào tin nhắn.
        // Đặt tiêu điểm ban đầu cho hộp nhập tin nhắn.
        $('#message').focus();
        // Bắt đầu kết nối.
        $.connection.hub.start().done(function () {
            $('#sendmessage').click(function () {
                // Gọi phương thức Gửi trên trung tâm.
                chat.server.send($('#displayname').val(), $('#message').val());
                // Xóa hộp văn bản và đặt lại tiêu điểm cho nhận xét tiếp theo.
                $('#message').val('').focus();
            });
        });
    });
    // Chức năng tùy chọn này mã hóa html thông báo để hiển thị trong trang.
    function htmlEncode(value) {
        var encodedValue = $('<div />').text(value).html();
        return encodedValue;
    }
</script>
<style>

    /* Nút Để Mở Chatbox */
    .nut-mo-chatbox {
        z-index: 1;
        background-color: #FF6B6B;
        color: white;
        padding: 16px 20px;
        border: none;
        cursor: pointer;
        opacity: 0.8;
        position: fixed;
        bottom: 23px;
        right: 28px;
        width: 100px;
        border-radius: 20px;
        font-size: 18px;
    }

    /* Ẩn chatbox mặc định */
    .Chatbox {
        display: none;
        position: fixed;
        bottom: 0;
        right: 15px;
        border: 3px solid #f1f1f1;
        z-index: 9;
        width: 300px;
        max-height: 400px;
        overflow-y: scroll;
        border-radius: 10px;
        background-color: #FFFFFF;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    /* Thêm style cho form */
    .form-container {
        max-width: 100%;
        padding: 10px;
        background-color: #F8F8F8;
    }

        /* thiết lập style textarea */
        .form-container textarea {
            width: 100%;
            padding: 10px;
            margin: 10px 0 20px 0;
            border: none;
            background: #f1f1f1;
            resize: none;
            min-height: 100px;
            border-radius: 10px;
            font-size: 16px;
            font-family: 'Roboto', sans-serif;
        }

            /*thiết lập style cho textarea khi được focus */
            .form-container textarea:focus {
                background-color: #ddd;
                outline: none;
            }

        /* Sthiết lập style cho nút trong form*/
        .form-container .btn {
            background-color: #4CAF50;
            color: white;
            padding: 12px 16px;
            border: none;
            cursor: pointer;
            width: 100%;
            margin-bottom: 10px;
            opacity: 0.8;
            border-radius: 20px;
            font-size: 18px;
            font-family: 'Roboto', sans-serif;
        }

        /* Thiết lập màu nền cho nút đóng chatbox */
        .form-container .nut-dong-chatbox {
            background-color: red;
        }

        /* Thêm hiệu ứng hover cho nút*/
        .form-container .btn:hover, .nut-mo-chatbox:hover {
            opacity: 1;
        }
</style>

